#include "Network.h"

int main()
{
	// ---- EXAMPLE OF LIBRARY USE ----

	// Build Neural Network
	int inputNeuronCount = 100;
	Network* net = new Network(inputNeuronCount);
	// layer 1 - hidden layer
	int layerNeuronCount = 16;
	net->addLayer(layerNeuronCount);
	// layer 2 - hidden layer
	net->addLayer(layerNeuronCount);
	/*
	// layer 3 - hidden layer
	net->addLayer(layerNeuronCount);
	// layer 4 - hidden layer
	net->addLayer(layerNeuronCount);
	*/
	// layer - output layer
	std::vector<std::string> labels{ "-", "|", "/", "\\" };
	Layer* endLayer = new Layer(labels.size(), labels);
	net->addLayer(*endLayer);
	// add data set
	std::vector<std::string> inputs{
		// |
		"0000000100000000010000000001000000000100000000010000000001000000000100000000010000000001000000000100",
		"1000000000100000000010000000001000000000100000000010000000001000000000100000000010000000001000000000",
		"0000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000000001000",
		"0001000000000100000000011000000000100000000010000000001000000000100000000010000000001100000000010000",
		"0000001000000000100000000100000000010000000011000000001000000000100000000110000000010000000001000000",
		"0000000100000000010000000001000000000100000000010000000001000000000100000000010000000001000000000100",
		"0000000010000000001000000000100000000010000000001000000000100000000010000000001000000000110000000001",
		"0001100000000100000000010000000001000000000100000000010000000011000000001000000000100000000110000000",
		"0000010000000001000000001100000000100000000010000000001000000000100000000010000000001000000000010000",
		"0100000000010000000001000000000100000000010000000001000000000110000000001000000000100000000010000000",
		"0000000010000000001000000000100000000010000000001000000000100000000010000000001000000000100000000010",
		"0011000000001000000000100000000110000000010000000001000000000100000000010000000001000000000100000000",
		"0000110000000010000000001000000000100000000010000000001000000000100000000010000000001000000000100000",
		"0000100000000010000000001000000000100000000010000000001000000000100000000010000000001000000000100000",
		"0000010000000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000",
		"0001000000000100000000010000000001000000000100000000110000000010000000001000000000100000000010000000",
		"0000000010000000001000000001100000000100000000110000000010000000001000000000100000000010000000001000",
		"0000110000000001000000000100000000010000000001000000000100000000010000000001000000000100000000011000",
		"0010000000001000000001100000000100000000010000000001000000000100000000010000000001000000000100000000",
		"0000000100000000011000000000100000000010000000001000000000100000000010000000001000000000100000000010",
		"1100000000100000000010000000001000000000100000000010000000001000000000100000000010000000001000000000",
		"0000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000000001001",
		"0100000000010000000001000000000100000000010000000001100000000010000000001000000000100000000010000000",
		"0000000100000000010000000001000000000100000000110000000010000000001000000000100000000010000000001000",
		"0010000000001000000000100000000010000000001000000000100000000010000000001000000000100000000010000000",
		"0000000010000000001000000000100000000010000000001000000000100000000010000000011000000001000000000100",
		// -
		"0000000000000000000000000000000000000000000000000011111111110000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000001111111111100000000000000",
		"0000000000111110000000000111110000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000001111111111000000000000000000000000000000",
		"0000000000000000000000000000000000000000111111111100000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000011111111110000000000",
		"0000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000111111111110010000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000111100000000011111100000000001000000000000000000000000000000",
		"1111111111011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111",
		"0000000000000000000000000000000000000000000000000000000111111111110000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111100000",
		"0000000000000000011111111110000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000111111111100000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111",
		"0000000000111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000011111111110000000000000000000000000000000000000000",
		"0000000000110000000011111111110000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000011111111111000000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000100000000001111111110000000000",
		"0000000000000000000000000000001111111111000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000011111111110000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000000000000000111111111110000000",
		"0000000000000000000000000000000000000000110000000000111111000000000111000000000000000000000000000000",
		// /
		"0000000011000000111000000110000000110000001100000001100000001100000000100000000000000000000000000000",
		"0000000000000000000000000000110000001110000011100000011000000011000000011000000011000000000000000000",
		"0000000000000000000000000000000000000011000000011000000011000000110000000010000000010000000011000000",
		"0001110000011100000011000000000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000100000000100000000110000000110000000110000000010000000011000000001000000001100000001100000000",
		"0000000000000000000000000000000000000000000000000000000000110000001110000001100000011000000111000000",
		"0000000111000000110000001100000001100000001100000000100000000110000000110000000010000000000000000000",
		"0001100000001100000001100000001100000000000000000000000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000001000000001100000011100000011000000110000001110000001100000000",
		"0000000001000000011000000011000000110000000110000000110000001110000000100000000000000000000000000000",
		"0000000000000000000000000011110000111000001110000001100000000100000000100000000010000000000000000000",
		"0000000000000000000100000000010000000110000000110000000110000000110000000110000001110000001100000000",
		"0000000110000001110000011100000011000000110000000010000000000000000000000000000000000000000000000000",
		"0000000000000000000000000000010000000110000000110000000110000000110000000110000001100000001100000000",
		"0000000011000000110000000110000000110000000110000000110000001100000000100000000000000000000000000000",
		"0000000001000000001100000001100000001100000001100000001100000011100000011000000010000000000000000000",
		"0000000100000000100000001100000001100000001100000000100000000110000000110000000010000000001000000000",
		"0000000000000000000000000000000000000000000000001100000011100000110000001100000011100000001000000000",
		"0011100000111000000010000000000000000000000000000000000000000000000000000000000000000000000000000000",
		"0000000110000000110000000110000000110000000110000000110000000010000000011000000001000000001000000000",
		"0000000000000000000000000000000000000011000000011000000011000000011000000011000000011000000001000000",
		"0000000011000001110000011100000111000000110000000010000000000000000000000000000000000000000000000000",
		"0000000110000000010000000010000000110000000110000000110000000110000000110000000000000000000000000000",
		// \ 
		"0001100000000011100000000011100000000001000000000000000000000000000000000000000000000000000000000000",
		"1100000000011000000000110000000000110000000001100000000011000000000110000000001100000000000000000000",
		"0000000000000000000000000000000000000000100000000011000000000110000000001000000000110000000001000000",
		"1000000000110000000001100000000011000000000110000000001100000000011000000000110000000000110000000001",
		"1000000000010000000001100000000011000000000110000000001000000000110000000001000000000110000000001000",
		"0011100000000011000000000110000000001110000000001100000000010000000000000000000000000000000000000000",
		"0000000000000000000000000000000000000000000000000000000000000000000000100000000011000000000110000000",
		"0110000000001100000000011000000000100000000011000000000111000000000110000000001100000000000000000000",
		"0110000000001100000000011000000000110000000000110000000001100000000011000000000000000000000000000000",
		"0000000000000000000000000000001100000000011100000000011000000000111000000000111000000000110000000001",
		"1000000000110000000001100000000011000000000110000000000110000000001100000000011000000000110000000000",
		"0110000000001100000000011000000000110000000001100000000011000000000011000000000100000000000000000000",
		"1100000000011000000000111000000000111000000000111000000000110000000000000000000000000000000000000000",
		"0000000000000000000010000000001100000000011000000000110000000001100000000011000000000110000000001100",
		"0011000000000110000000001100000000011000000000110000000001100000000011000000000100000000000000000000",
		"0000000000000000000000000000001100000000011100000000011000000000110000000001110000000001110000000001",
		"1000000000010000000000100000000001000000000011000000000110000000001100000000011000000000110000000001",
		"0000100000000001000000000110000000001100000000011000000000110000000001000000000000000000000000000000",
		"0110000000001100000000010000000001100000000011000000000110000000001100000000011000000000100000000011",
		"0000000000000000000010000000001100000000011000000000110000000001110000000001110000000001110000000001",
		"0011000000000100000000011000000000100000000011000000000100000000011000000000110000000001000000000110",
		"0110000000001000000000010000000000100000000011000000000110000000001100000000011000000000110000000001"
	};
	std::vector<std::string> outputs{
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"|",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"-",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"/",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\",
		"\\"
	};
	net->addData(inputs, outputs); // add training dataset to network

	// Train
	net->StartTrainig(true);
	getchar(); // training until user presses enter
	net->StopTraining();
	net->exportNetwork("model.net");

	// After Training
	bool flag = true;
	while (flag)
	{
		std::string input = "";
		std::cout << "Enter input string: ";
		std::cin >> input;

		try
		{
			std::cout << "result: " << net->processInput(input) << "\n";
		}
		catch (std::exception& e)
		{
			flag = false;
		}
	}

	return 0;
}